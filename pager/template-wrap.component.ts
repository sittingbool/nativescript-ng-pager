//----------------------------------------------------------------------------------------------------------
import {
    Directive, TemplateRef, OnInit, OnDestroy, Input, ViewContainerRef, EmbeddedViewRef
} from '@angular/core'
//----------------------------------------------------------------------------------------------------------



//----------------------------------------------------------------------------------------------------------
@Directive({
    selector: '[hTemplateWrapper]'
})
export class TemplateWrapper implements OnInit, OnDestroy
//----------------------------------------------------------------------------------------------------------
{
    //------------------------------------------------------------------------------------------------------
    @Input() item: any;

    @Input() index: number;

    @Input('hTemplateWrapper') templateRef: TemplateRef<any>;

    view: EmbeddedViewRef<any>;
    //------------------------------------------------------------------------------------------------------


    //------------------------------------------------------------------------------------------------------
    constructor(public viewContainer: ViewContainerRef)
    //------------------------------------------------------------------------------------------------------
    {}


    //------------------------------------------------------------------------------------------------------
    ngOnInit()
    //------------------------------------------------------------------------------------------------------
    {
        this.view = this.viewContainer.createEmbeddedView(this.templateRef, {
            '\$implicit': this.item,
            'index': this.index
        });
    }


    //------------------------------------------------------------------------------------------------------
    ngOnDestroy()
    //------------------------------------------------------------------------------------------------------
    {
        this.view.destroy();
    }
}



//----------------------------------------------------------------------------------------------------------
@Directive({
    selector: '[hTemplate]',
    host: {
    }
})
export class HalitosisTemplate
//----------------------------------------------------------------------------------------------------------
{

    //------------------------------------------------------------------------------------------------------
    @Input('hTemplate') name: string;
    //------------------------------------------------------------------------------------------------------


    //------------------------------------------------------------------------------------------------------
    constructor(public template: TemplateRef<any>)
    //------------------------------------------------------------------------------------------------------
    {}
}